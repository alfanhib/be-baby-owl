# Module 3: Course Management

**Module ID:** M03  
**Module Name:** Course Management  
**Priority:** üî¥ Critical (Phase 1, Sprint 2-3)  
**Story Points:** 45 points  
**Owner:** Backend Team + Frontend Team

---

## üìã Module Overview

### Purpose

This module enables **admins and instructors to create, manage, and publish courses**. It includes course structure (sections and lessons), course catalog (public view for students), and course status management (draft/published).

### Business Value

- **Content Creation:** Platform needs courses to function
- **Scalability:** Easy course creation = more content = more revenue
- **Student Experience:** Well-structured courses improve learning outcomes
- **Marketing:** Course catalog attracts students

### Success Metrics

- Time to create course: <30 minutes (for experienced instructor)
- Course completion rate: >80% (well-structured courses)
- Course catalog views: 1000+ per month
- Published courses: 10+ in first 3 months

---

## üë• User Roles

- **Admin:** Can create, edit, publish, delete any course
- **Instructor:** Can create, edit courses assigned to them
- **Student:** Can view published courses in catalog, enroll in courses

---

## üìö User Stories

### Story 2.1.1: Create Course (Instructor/Super Admin)

**Story Points:** 8  
**Priority:** üî¥ Critical  
**Sprint:** Sprint 2

#### User Story

```
AS AN instructor
I WANT TO create a new course
SO THAT students can enroll and learn the content I teach
```

**Note:** Super Admin can also create courses for administrative purposes, but primary course creators are instructors.

#### Acceptance Criteria

**AC1: Access Course Creation**

- GIVEN I am logged in as instructor or super_admin
- WHEN I navigate to `/instructor/courses` ‚Üí "Create New Course"
- THEN I see the course creation form

**AC2: Course Creation Form - Basic Info**

- Form includes:
  - **Course Title** (text input, required, max 100 chars)
  - **Course Code** (text input, optional, e.g., "RN101", max 20 chars)
  - **Description** (rich text editor, required, max 5000 chars)
  - **Cover Image** (image upload, recommended 1200x630px, max 5MB)
  - **Category** (dropdown: Web Development, Mobile Development, Data Science, Design, Business, etc.)
  - **Level** (dropdown: Beginner, Intermediate, Advanced)
  - **Language** (dropdown: English, Indonesian, default: Indonesian)
  - **Estimated Duration** (number input, hours, e.g., "40 hours")
  - **Price** (for future, disabled for MVP - pricing via packages)
  - **Status** (dropdown: Draft, Published, default: Draft)
  - "Save as Draft" button
  - "Save & Continue" button (proceeds to add lessons)

**AC3: Create Course (Save as Draft)**

- GIVEN I fill basic course information
- WHEN I click "Save as Draft"
- THEN:
  - API call to `POST /api/courses`
  - Course created with status: "draft"
  - Course ID generated (e.g., "course_123")
  - Success toast: "Course created successfully!"
  - Redirected to course edit page (`/instructor/courses/:id/edit`)

**AC4: Form Validation**

- GIVEN I submit the form with invalid data
- WHEN I click "Save as Draft" or "Save & Continue"
- THEN I see validation errors:
  - Title empty: "Course title is required"
  - Title too long: "Title must be less than 100 characters"
  - Description empty: "Description is required"
  - Category not selected: "Please select a category"

**AC5: Cover Image Upload**

- GIVEN I click "Upload Cover Image"
- WHEN I select an image file
- THEN:
  - File validated (max 5MB, formats: JPG, PNG, WebP)
  - Image uploaded to S3/Cloudinary
  - Preview shown immediately
  - Image URL saved with course data

**AC6: Default Values**

- When form loads:
  - Status: "Draft"
  - Language: "Indonesian"
  - Level: "Beginner"

---

#### Edge Cases

**E1: Duplicate Course Title**

- Allow duplicate titles (no unique constraint)
- Show warning: "A course with similar title exists. Continue?"
- Instructor can proceed

**E2: Image Upload Failure**

- If upload fails:
  - Show error: "Image upload failed. Please try again."
  - Allow saving course without image (optional field)

**E3: Rich Text Editor Content**

- Sanitize HTML input (prevent XSS)
- Strip unsupported tags
- Allow: bold, italic, lists, links, headings
- Disallow: script, iframe, object

**E4: Very Long Description (>5000 chars)**

- Show character counter: "2543 / 5000"
- Block submission if exceeded

---

#### API Contract

**Endpoint:** `POST /api/courses`

**Authorization:** `instructor`, `super_admin`

**Request Body:**

```json
{
  "title": "101 React Native - From Zero to Hero",
  "code": "RN101",
  "description": "<p>Learn React Native from scratch...</p>",
  "coverImage": "https://cdn.babyowl.com/courses/rn101-cover.jpg",
  "category": "mobile_development",
  "level": "beginner",
  "language": "indonesian",
  "estimatedDuration": 40,
  "status": "draft"
}
```

**Response (Success - 201 Created):**

```json
{
  "success": true,
  "data": {
    "course": {
      "id": "course_123",
      "title": "101 React Native - From Zero to Hero",
      "code": "RN101",
      "slug": "101-react-native-from-zero-to-hero",
      "description": "<p>Learn React Native from scratch...</p>",
      "coverImage": "https://cdn.babyowl.com/courses/rn101-cover.jpg",
      "category": "mobile_development",
      "level": "beginner",
      "language": "indonesian",
      "estimatedDuration": 40,
      "status": "draft",
      "createdBy": "user_789",
      "createdAt": "2025-12-01T10:00:00Z"
    }
  }
}
```

---

#### Dependencies

- Module 1 (Authentication, RBAC - only instructor/super_admin)
- File upload service (S3/Cloudinary)

---

#### Test Scenarios

**TS1: Happy Path - Create Course**

1. Login as instructor
2. Navigate to Courses ‚Üí "Create New Course"
3. Enter title: "101 React Native"
4. Enter code: "RN101"
5. Enter description: "Learn React Native..."
6. Upload cover image
7. Select category: "Mobile Development"
8. Select level: "Beginner"
9. Click "Save as Draft"
10. Verify success toast
11. Verify redirected to `/admin/courses/course_123/edit`

**TS2: Validation Errors**

1. On course creation form
2. Leave title empty
3. Click "Save as Draft"
4. Verify error: "Course title is required"
5. Enter title: "[Very long title 120+ characters...]"
6. Verify error: "Title must be less than 100 characters"

---

---

### Story 2.1.2: Edit Course Details

**Story Points:** 5  
**Priority:** üî¥ Critical  
**Sprint:** Sprint 2

#### User Story

```
AS AN admin or instructor
I WANT TO edit course details (title, description, image, etc.)
SO THAT I can update course information as needed
```

#### Acceptance Criteria

**AC1: Access Course Edit Page**

- GIVEN I have created a course
- WHEN I navigate to `/admin/courses/:id/edit`
- THEN I see the course edit form pre-filled with existing data

**AC2: Edit Course Information**

- GIVEN I am on the course edit page
- WHEN I modify any field (title, description, etc.)
- AND I click "Save Changes"
- THEN:
  - API call to `PUT /api/courses/:id`
  - Course updated in database
  - Success toast: "Course updated successfully!"
  - Page remains on edit view (no redirect)

**AC3: Discard Changes**

- GIVEN I have unsaved changes
- WHEN I click "Cancel" or try to navigate away
- THEN:
  - Show confirmation: "You have unsaved changes. Discard?"
  - "Stay" button ‚Üí remain on page
  - "Discard" button ‚Üí discard changes, navigate away

---

#### API Contract

**Endpoint:** `PUT /api/courses/:id`

**Request Body:** (same structure as POST, only send changed fields)

```json
{
  "title": "101 React Native - Updated Title",
  "description": "<p>Updated description...</p>"
}
```

**Response (Success - 200 OK):**

```json
{
  "success": true,
  "data": {
    "course": {
      "id": "course_123",
      "title": "101 React Native - Updated Title",
      "updatedAt": "2025-12-02T10:00:00Z"
    }
  }
}
```

---

#### Test Scenarios

**TS1: Edit Course**

1. Navigate to `/admin/courses/course_123/edit`
2. Change title to "101 React Native - Updated"
3. Click "Save Changes"
4. Verify success toast
5. Refresh page ‚Üí verify title persisted

---

---

### Story 2.1.3: Course Structure (Sections & Lessons)

**Story Points:** 8  
**Priority:** üî¥ Critical  
**Sprint:** Sprint 2-3

#### User Story

```
AS AN admin or instructor
I WANT TO organize course content into sections and lessons
SO THAT students have a structured learning path
```

#### Acceptance Criteria

**AC1: Course Structure Page**

- GIVEN I am editing a course
- WHEN I navigate to "Course Structure" tab
- THEN I see:
  - List of sections (collapsible)
  - Each section contains list of lessons
  - "Add Section" button
  - "Add Lesson" button (within each section)
  - Drag handles to reorder sections/lessons

**AC2: Section Structure**

```
Course
‚îú‚îÄ‚îÄ Section 1: Introduction
‚îÇ   ‚îú‚îÄ‚îÄ Lesson 1: Welcome
‚îÇ   ‚îú‚îÄ‚îÄ Lesson 2: Setup Environment
‚îÇ   ‚îî‚îÄ‚îÄ Lesson 3: First App
‚îú‚îÄ‚îÄ Section 2: Components
‚îÇ   ‚îú‚îÄ‚îÄ Lesson 4: Text & View
‚îÇ   ‚îî‚îÄ‚îÄ Lesson 5: FlatList
‚îî‚îÄ‚îÄ Section 3: Navigation
    ‚îî‚îÄ‚îÄ Lesson 6: React Navigation
```

**AC3: Add Section**

- GIVEN I click "Add Section"
- WHEN a modal opens
- THEN I can enter:
  - Section title (required, max 100 chars)
  - Section description (optional, max 500 chars)
  - "Create Section" button
- WHEN I click "Create Section"
- THEN:
  - Section added to course structure
  - Section appears at bottom of list
  - Success toast: "Section added"

**AC4: Add Lesson (Within Section)**

- GIVEN I click "Add Lesson" within a section
- WHEN a modal opens
- THEN I can enter:
  - Lesson title (required, max 100 chars)
  - Lesson type (dropdown: Video, Quiz, Reading Material, Assignment)
  - "Create Lesson" button
- WHEN I click "Create Lesson"
- THEN:
  - Lesson added to section
  - Lesson appears at bottom of section's lesson list
  - Success toast: "Lesson added"
  - Redirected to lesson edit page (based on type)

**AC5: Reorder Sections/Lessons (Drag & Drop)**

- GIVEN I want to reorder sections or lessons
- WHEN I drag a section/lesson to new position
- THEN:
  - Visual indicator shows drop target
  - On drop, order updated
  - API call to update order (debounced)
  - Success toast: "Order updated"

**AC6: Delete Section**

- GIVEN I click delete icon on section
- WHEN confirmation modal appears
- THEN:
  - Warning: "Delete section? All lessons inside will also be deleted."
  - "Cancel" button
  - "Delete" button (danger/red)
- WHEN I confirm delete
- THEN:
  - Section and all its lessons deleted
  - Success toast: "Section deleted"

**AC7: Delete Lesson**

- GIVEN I click delete icon on lesson
- WHEN confirmation modal appears
- THEN:
  - Warning: "Delete lesson? This cannot be undone."
  - "Cancel" and "Delete" buttons
- WHEN I confirm delete
- THEN:
  - Lesson deleted
  - Success toast: "Lesson deleted"

---

#### API Contracts

**Endpoint 1:** `POST /api/courses/:courseId/sections`

**Request Body:**

```json
{
  "title": "Introduction",
  "description": "Getting started with React Native",
  "order": 1
}
```

**Response (Success - 201 Created):**

```json
{
  "success": true,
  "data": {
    "section": {
      "id": "section_123",
      "courseId": "course_123",
      "title": "Introduction",
      "order": 1,
      "createdAt": "2025-12-01T10:00:00Z"
    }
  }
}
```

---

**Endpoint 2:** `POST /api/courses/:courseId/sections/:sectionId/lessons`

**Request Body:**

```json
{
  "title": "Welcome to React Native",
  "type": "video",
  "order": 1
}
```

**Response (Success - 201 Created):**

```json
{
  "success": true,
  "data": {
    "lesson": {
      "id": "lesson_456",
      "sectionId": "section_123",
      "title": "Welcome to React Native",
      "type": "video",
      "order": 1,
      "createdAt": "2025-12-01T10:00:00Z"
    }
  }
}
```

---

**Endpoint 3:** `PUT /api/courses/:courseId/sections/reorder`

**Request Body:**

```json
{
  "sections": [
    { "id": "section_123", "order": 1 },
    { "id": "section_456", "order": 2 }
  ]
}
```

---

#### Test Scenarios

**TS1: Create Course Structure**

1. Navigate to course edit ‚Üí "Course Structure" tab
2. Click "Add Section"
3. Enter title: "Introduction"
4. Click "Create Section"
5. Verify section appears
6. Within section, click "Add Lesson"
7. Enter title: "Welcome", type: "Video"
8. Click "Create Lesson"
9. Verify lesson appears under section

**TS2: Reorder Lessons**

1. Create section with 3 lessons
2. Drag Lesson 3 to position 1
3. Verify visual feedback
4. Drop lesson
5. Verify new order saved
6. Refresh page ‚Üí verify order persisted

**TS3: Delete Section**

1. Create section with 2 lessons
2. Click delete on section
3. Confirm delete
4. Verify section and all lessons deleted

---

---

### Story 2.1.4: Lesson Management (Create, Edit, Reorder)

**Story Points:** 8  
**Priority:** üî¥ Critical  
**Sprint:** Sprint 3

#### User Story

```
AS AN admin or instructor
I WANT TO create lessons as containers and add exercises within them
SO THAT students have organized, grouped content to learn from
```

#### Acceptance Criteria

**AC1: Lesson as Container**

- **Lesson:** Container that groups related exercises
- **Exercises:** Actual content within a lesson (video, quiz, material, assignment)
- **Structure:** Course ‚Üí Section ‚Üí Lesson ‚Üí Exercises
- **Example:**
  ```
  Lesson 1: Introduction to React Native
  ‚îú‚îÄ‚îÄ Exercise 1: Welcome Video (5 min)
  ‚îú‚îÄ‚îÄ Exercise 2: Quiz - Basic Concepts (10 questions)
  ‚îî‚îÄ‚îÄ Exercise 3: Reading - Setup Guide (3 pages)
  ```

**AC2: Create Lesson (Container)**

- GIVEN I am in course structure view
- WHEN I click "Add Lesson" within a section
- THEN I see lesson creation form:
  - Lesson title (required, max 100 chars)
  - Lesson description (optional, rich text)
  - "Create Lesson" button
- WHEN I submit:
  - Lesson created (empty container, no exercises yet)
  - Redirected to lesson detail page
  - Can now add exercises

**AC3: Add Exercises to Lesson**

- GIVEN I am on lesson detail page
- WHEN I click "Add Exercise" button
- THEN I see exercise type selector:
  - Video
  - Quiz
  - Material (Reading)
  - Assignment
- WHEN I select type:
  - Opens exercise creation form (specific to type)
  - Exercise added to lesson
  - Appears in exercise list (ordered)

**AC4: Create Video Exercise**

- GIVEN I select "Video" exercise type
- WHEN the exercise editor opens
- THEN I see fields:
  - Exercise title (e.g., "Welcome Video")
  - YouTube Video URL (text input)
  - Video preview (iframe embed)
  - Exercise description (optional, rich text)
  - Duration (auto-filled from YouTube API, or manual input)
  - "Save Exercise" button

**AC5: Create Quiz Exercise**

- GIVEN I select "Quiz" exercise type
- WHEN the exercise editor opens
- THEN I redirect to quiz builder (detailed in Module 4)

**AC6: Create Material Exercise**

- GIVEN I select "Material" exercise type
- WHEN the exercise editor opens
- THEN I see:
  - Exercise title (e.g., "Setup Guide")
  - Content editor (rich text, supports: headings, bold, italic, lists, images, code blocks)
  - "Save Exercise" button

**AC7: Create Assignment Exercise**

- GIVEN I select "Assignment" exercise type
- WHEN the exercise editor opens
- THEN I redirect to assignment builder (detailed in Module 5)

**AC8: Reorder Exercises**

- GIVEN I am on lesson detail page
- WHEN I drag exercise to new position
- THEN:
  - Visual indicator shows drop target
  - Exercise order updated
  - "Exercise 1, Exercise 2, Exercise 3..." numbering updates

**AC9: Edit/Delete Exercise**

- Click exercise ‚Üí opens editor (can modify)
- Delete button ‚Üí confirmation ‚Üí exercise deleted

**AC10: Lesson Metadata**

- All lessons have:
  - ID (generated)
  - Title
  - Description
  - Order (within section)
  - Estimated duration (sum of all exercises)
  - Exercise count (e.g., "5 exercises")
  - Created by (user ID)
  - Created at / Updated at

---

#### API Contracts

**Endpoint 1:** `POST /api/lessons/:lessonId/exercises` (Create exercise)

**Request Body (Video Exercise):**

```json
{
  "title": "Welcome Video",
  "type": "video",
  "content": {
    "youtubeUrl": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "description": "<p>Welcome to the course...</p>",
    "duration": 5
  },
  "orderIndex": 1
}
```

**Request Body (Material Exercise):**

```json
{
  "title": "Setup Guide",
  "type": "material",
  "content": {
    "body": "<h2>Installation Steps</h2><p>Follow these steps...</p>"
  },
  "orderIndex": 2
}
```

**Response (Success - 201 Created):**

```json
{
  "success": true,
  "data": {
    "exercise": {
      "id": "exercise_789",
      "lessonId": "lesson_456",
      "title": "Welcome Video",
      "type": "video",
      "content": {
        /* ... */
      },
      "orderIndex": 1,
      "createdAt": "2025-12-01T10:00:00Z"
    }
  }
}
```

---

**Endpoint 2:** `GET /api/lessons/:lessonId/exercises` (Get all exercises in lesson)

**Response (Success - 200 OK):**

```json
{
  "success": true,
  "data": {
    "lesson": {
      "id": "lesson_456",
      "title": "Introduction to React Native",
      "description": "Learn the basics...",
      "exerciseCount": 3
    },
    "exercises": [
      {
        "id": "exercise_789",
        "title": "Welcome Video",
        "type": "video",
        "orderIndex": 1,
        "duration": 5
      },
      {
        "id": "exercise_790",
        "title": "Quiz - Basic Concepts",
        "type": "quiz",
        "orderIndex": 2,
        "duration": 10
      },
      {
        "id": "exercise_791",
        "title": "Setup Guide",
        "type": "material",
        "orderIndex": 3,
        "duration": 15
      }
    ]
  }
}
```

---

**Endpoint 3:** `PUT /api/exercises/:exerciseId` (Update exercise)

**Request Body:**

```json
{
  "title": "Updated Title",
  "content": {
    /* updated content */
  }
}
```

**Response (Success - 200 OK):**

```json
{
  "success": true,
  "data": {
    "exercise": {
      "id": "exercise_789",
      "title": "Updated Title",
      "updatedAt": "2025-12-01T11:00:00Z"
    }
  }
}
```

---

#### Test Scenarios

**TS1: Create Lesson with Multiple Exercises**

1. Navigate to course structure
2. Click "Add Lesson" in Section 1
3. Enter lesson title: "Introduction to React Native"
4. Click "Create Lesson"
5. On lesson detail page, click "Add Exercise"
6. Select "Video" ‚Üí Enter YouTube URL ‚Üí Save
7. Click "Add Exercise" again
8. Select "Quiz" ‚Üí Create 5 questions ‚Üí Save
9. Click "Add Exercise" again
10. Select "Material" ‚Üí Write content ‚Üí Save
11. Verify lesson shows "3 exercises"
12. Verify lesson appears in course structure

**TS2: Reorder Exercises**

1. Open lesson with 3 exercises
2. Drag Exercise 3 to position 1
3. Verify order updates: Exercise 3, Exercise 1, Exercise 2
4. Refresh page ‚Üí verify order persisted

**TS3: Edit Exercise**

1. Click on existing exercise (e.g., Video exercise)
2. Change title to "Updated Video Title"
3. Click "Save Changes"
4. Verify success toast
5. Verify title updated in exercise list

**TS4: Delete Exercise**

1. Click delete icon on exercise
2. Confirm deletion
3. Verify exercise removed from list
4. Verify lesson exercise count decremented

---

---

### Story 2.1.5: Course Publishing (Draft ‚Üí Published)

**Story Points:** 5  
**Priority:** üî¥ Critical  
**Sprint:** Sprint 3

#### User Story

```
AS AN admin or instructor
I WANT TO publish a course (change status from draft to published)
SO THAT students can see and enroll in the course
```

#### Acceptance Criteria

**AC1: Draft vs Published**

- **Draft:**
  - Not visible in course catalog
  - Only visible to creator (admin/instructor)
  - Can be edited freely
- **Published:**
  - Visible in course catalog (all users)
  - Students can enroll
  - Can still be edited (changes reflected immediately)

**AC2: Publish Course Button**

- GIVEN I am editing a draft course
- WHEN I click "Publish Course" button (top-right)
- THEN:
  - Pre-publish validation runs:
    - Course has title ‚úì
    - Course has description ‚úì
    - Course has at least 1 section ‚úì
    - Course has at least 3 lessons ‚úì
    - Course has cover image (warning if missing, can proceed)
  - If validation passes:
    - Confirmation modal: "Publish course? It will be visible to all students."
    - "Cancel" and "Publish" buttons
  - If validation fails:
    - Error message: "Course cannot be published. Please complete: [missing items]"

**AC3: Successful Publication**

- GIVEN I confirm publication
- WHEN API call completes
- THEN:
  - Course status changes to "published"
  - Success toast: "Course published successfully!"
  - "Publish Course" button changes to "Unpublish Course"
  - Course appears in course catalog

**AC4: Unpublish Course**

- GIVEN a published course
- WHEN I click "Unpublish Course"
- THEN:
  - Confirmation: "Unpublish course? Students already enrolled can still access it."
  - If confirmed:
    - Course status changes to "draft"
    - Course removed from catalog (new students can't enroll)
    - Existing enrollments remain active

---

#### API Contract

**Endpoint:** `PATCH /api/courses/:courseId/publish`

**Request Body:**

```json
{
  "status": "published"
}
```

**Response (Success - 200 OK):**

```json
{
  "success": true,
  "data": {
    "course": {
      "id": "course_123",
      "status": "published",
      "publishedAt": "2025-12-01T12:00:00Z"
    }
  }
}
```

**Response (Error - 400 Bad Request - Validation Failed):**

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_FAILED",
    "message": "Course cannot be published",
    "details": {
      "missingItems": [
        "At least 1 section required",
        "At least 3 lessons required"
      ]
    }
  }
}
```

---

#### Test Scenarios

**TS1: Publish Course (Success)**

1. Create course with 1 section, 3 lessons
2. Click "Publish Course"
3. Verify validation passes
4. Confirm publication
5. Verify success toast
6. Verify status changes to "Published"
7. Navigate to course catalog (as student) ‚Üí verify course visible

**TS2: Publish Course (Validation Fails)**

1. Create course with only 1 lesson
2. Click "Publish Course"
3. Verify error: "At least 3 lessons required"
4. Add 2 more lessons
5. Click "Publish Course" again ‚Üí success

**TS3: Unpublish Course**

1. Publish a course
2. Click "Unpublish Course"
3. Confirm unpublish
4. Verify status changes to "Draft"
5. Navigate to course catalog ‚Üí verify course NOT visible

---

---

### Story 2.1.6: Course Catalog View (Public List)

**Story Points:** 8  
**Priority:** üî¥ Critical  
**Sprint:** Sprint 3

#### User Story

```
AS A student (or visitor)
I WANT TO browse all available courses
SO THAT I can see what's offered and decide what to purchase
```

#### Acceptance Criteria

**AC1: Course Catalog Page Access**

- GIVEN I am a student (logged in or not)
- WHEN I navigate to `/courses` or click "Courses" in navigation
- THEN I see the course catalog page

**AC2: Course Catalog Layout**

- Display:
  - Page title: "Explore Our Courses"
  - Filter sidebar (left):
    - Category filter (checkboxes: Web Dev, Mobile Dev, etc.)
    - Level filter (checkboxes: Beginner, Intermediate, Advanced)
    - Language filter (checkboxes: Indonesian, English)
    - "Clear Filters" button
  - Sort dropdown (top-right): "Sort by: Newest, Popular, Title A-Z"
  - Course grid (3 columns on desktop, 1 on mobile)
  - Each course card shows:
    - Cover image
    - Course title
    - Level badge (Beginner/Intermediate/Advanced)
    - Category badge
    - Estimated duration (e.g., "40 hours")
    - "View Details" button

**AC3: Filter Courses**

- GIVEN I select filter options (e.g., Category: Mobile Development, Level: Beginner)
- WHEN I apply filters
- THEN:
  - Only courses matching filters are displayed
  - Course count updated (e.g., "Showing 5 courses")
  - URL updated with query params (e.g., `/courses?category=mobile&level=beginner`)

**AC4: Sort Courses**

- GIVEN I select sort option (e.g., "Title A-Z")
- WHEN the page reloads/refetches
- THEN:
  - Courses displayed in sorted order
  - URL updated with sort param (e.g., `/courses?sort=title_asc`)

**AC5: Empty State**

- GIVEN no courses match filters
- WHEN the catalog loads
- THEN:
  - Show message: "No courses found. Try adjusting your filters."
  - "Clear Filters" button

**AC6: Course Card Click**

- GIVEN I click "View Details" on a course card
- WHEN the click is processed
- THEN:
  - Redirected to course detail page (`/courses/:slug`)

---

#### API Contract

**Endpoint:** `GET /api/courses`

**Query Parameters:**

- `category` (string, optional): Filter by category (e.g., "mobile_development")
- `level` (string, optional): Filter by level (e.g., "beginner")
- `language` (string, optional): Filter by language (e.g., "indonesian")
- `sort` (string, optional): Sort order (e.g., "newest", "title_asc")
- `status` (string, default: "published"): Only show published courses
- `page` (number, default: 1): Pagination (future)
- `limit` (number, default: 20): Items per page

**Example Request:**

```
GET /api/courses?category=mobile_development&level=beginner&sort=newest
```

**Response (Success - 200 OK):**

```json
{
  "success": true,
  "data": {
    "courses": [
      {
        "id": "course_123",
        "title": "101 React Native - From Zero to Hero",
        "slug": "101-react-native-from-zero-to-hero",
        "coverImage": "https://cdn.babyowl.com/courses/rn101.jpg",
        "category": "mobile_development",
        "level": "beginner",
        "language": "indonesian",
        "estimatedDuration": 40,
        "totalLessons": 50,
        "createdAt": "2025-11-01T10:00:00Z"
      }
      // ... more courses
    ],
    "pagination": {
      "total": 5,
      "page": 1,
      "limit": 20,
      "totalPages": 1
    }
  }
}
```

---

#### Test Scenarios

**TS1: View Course Catalog**

1. Navigate to `/courses`
2. Verify page loads with course cards
3. Verify filters visible (sidebar)
4. Verify sort dropdown visible

**TS2: Filter Courses**

1. On catalog page
2. Select category: "Mobile Development"
3. Select level: "Beginner"
4. Click "Apply Filters" (or auto-apply)
5. Verify only matching courses displayed
6. Verify URL updated

**TS3: Sort Courses**

1. On catalog page
2. Select sort: "Title A-Z"
3. Verify courses sorted alphabetically
4. Select sort: "Newest"
5. Verify courses sorted by created date (newest first)

**TS4: Clear Filters**

1. Apply filters
2. Click "Clear Filters"
3. Verify all courses displayed again
4. Verify URL cleared

---

---

### Story 2.1.7: Course Detail Page (Overview, Syllabus)

**Story Points:** 3  
**Priority:** üî¥ Critical  
**Sprint:** Sprint 3

#### User Story

```
AS A student
I WANT TO view detailed information about a course
SO THAT I can decide whether to purchase/enroll
```

#### Acceptance Criteria

**AC1: Course Detail Page Layout**

- GIVEN I navigate to `/courses/:slug`
- WHEN the page loads
- THEN I see:
  - Course cover image (large, top)
  - Course title (H1)
  - Level & Category badges
  - Estimated duration
  - Course description (full, formatted)
  - "Buy via WhatsApp" button (primary CTA)
  - Course syllabus (sections & lessons, collapsed by default)
  - Instructor info (name, avatar, bio)

**AC2: Course Syllabus (Expandable)**

- GIVEN the course syllabus is displayed
- WHEN I click on a section title
- THEN:
  - Section expands to show list of lessons
  - Each lesson shows:
    - Lesson title
    - Lesson type icon (üé• Video, üìù Quiz, üìñ Reading, üìã Assignment)
    - Estimated duration
    - Lock icon (üîí) if not enrolled

**AC3: Buy via WhatsApp Button**

- GIVEN I click "Buy via WhatsApp"
- WHEN the button is clicked
- THEN:
  - Opens WhatsApp (wa.me) with pre-filled message:

    ```
    Hi! I'm interested in the course:
    [Course Title]

    I'd like to purchase [Package - to be selected].
    Please let me know the details.
    ```

  - Message includes course title and user info (if logged in)

**AC4: Already Enrolled (Student View)**

- GIVEN I am enrolled in this course
- WHEN I view the course detail page
- THEN:
  - "Buy via WhatsApp" button replaced with "Go to Course" button
  - Button redirects to learning interface (`/courses/:id/learn`)

---

#### API Contract

**Endpoint:** `GET /api/courses/:slug`

**Response (Success - 200 OK):**

```json
{
  "success": true,
  "data": {
    "course": {
      "id": "course_123",
      "title": "101 React Native - From Zero to Hero",
      "slug": "101-react-native-from-zero-to-hero",
      "description": "<p>Comprehensive React Native course...</p>",
      "coverImage": "https://cdn.babyowl.com/courses/rn101.jpg",
      "category": "mobile_development",
      "level": "beginner",
      "estimatedDuration": 40,
      "totalLessons": 50,
      "instructor": {
        "id": "user_789",
        "name": "John Doe",
        "avatar": "https://cdn.babyowl.com/avatars/user_789.jpg",
        "bio": "10+ years experience in mobile development"
      },
      "sections": [
        {
          "id": "section_123",
          "title": "Introduction",
          "lessons": [
            {
              "id": "lesson_456",
              "title": "Welcome to React Native",
              "type": "video",
              "duration": 10
            }
          ]
        }
      ],
      "isEnrolled": false
    }
  }
}
```

---

#### Test Scenarios

**TS1: View Course Detail (Not Enrolled)**

1. Navigate to `/courses/101-react-native-from-zero-to-hero`
2. Verify course info displayed
3. Verify "Buy via WhatsApp" button visible
4. Click button ‚Üí verify WhatsApp opens with pre-filled message

**TS2: View Course Detail (Already Enrolled)**

1. Login as student enrolled in course
2. Navigate to course detail page
3. Verify "Go to Course" button visible (instead of "Buy")
4. Click button ‚Üí verify redirected to learning interface

---

---

## üìä Module Summary

### Total Story Points: 45

| Story | Title                                 | Points |
| ----- | ------------------------------------- | ------ |
| 2.1.1 | Create Course                         | 8      |
| 2.1.2 | Edit Course Details                   | 5      |
| 2.1.3 | Course Structure (Sections & Lessons) | 8      |
| 2.1.4 | Lesson Management                     | 8      |
| 2.1.5 | Course Publishing                     | 5      |
| 2.1.6 | Course Catalog View                   | 8      |
| 2.1.7 | Course Detail Page                    | 3      |

---

## ‚úÖ Module Completion Checklist

Module is complete when:

- [ ] All 7 user stories implemented
- [ ] Course creation working (admin/instructor)
- [ ] Course structure (sections & lessons) functional
- [ ] Drag & drop reordering working
- [ ] Course publishing/unpublishing working
- [ ] Course catalog visible to all users
- [ ] Course detail page displaying all info
- [ ] WhatsApp integration (deep link) working
- [ ] Unit tests (>80% coverage)
- [ ] Integration tests
- [ ] Responsive design (mobile + desktop)
- [ ] Documentation complete

---

**End of Module 3: Course Management**

_Next Module: [Module 4: Content Delivery ‚Üí](../module-04-content-delivery/2.2-content-delivery.md)_
